webpackJsonp([2],{1801:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e(63),l=function(t){return t&&t.__esModule?t:{default:t}}(i),o=e(38);a.default={data:function(){return{editCatalogForm:{catalogId:"",title:"",order:0,avatar:"",children:[]},imageUrl:"",imageChildUrl:"",editCatalogChildVisible:!1,editCatalogChildForm:{catalogId:"",title:"",order:0,avatar:""},editCatalogChildFormRules:{title:[{required:!0,message:"请输入子分类名称",trigger:"blur"}]}}},methods:{getMsg:function(){var t=this.store.get("editCatalog");this.editCatalogForm={catalogId:t.catalogId,title:t.basic.title,order:t.basic.order,avatar:t.basic.avatar,children:t.basic.children},this.imageUrl=t.basic.avatar},handleAvatarSuccess:function(t,a){if(t.code)return void this.$message.error({message:t.message});this.imageUrl=t.data.url},handleChildAvatarSuccess:function(t,a){if(t.code)return void this.$message.error({message:t.message});this.imageChildUrl=t.data.url,console.log(this.imageChildUrl)},beforeAvatarUpload:function(t){var a="image/jpeg"===t.type,e="image/png"===t.type,i=t.size/1024/1024<2;return a||e||this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),i||this.$message.error("上传头像图片大小不能超过 2MB!"),(a||e)&&i},handleEdit:function(t,a){this.editCatalogChildVisible=!0,this.imageChildUrl=a.avatar,this.editCatalogChildForm={catalogId:a.catalogId,title:a.title,order:a.order,avatar:a.avatar}},handleDelete:function(t,a){var e=this;this.editCatalogForm.children.forEach(function(t,i){t.catalogId&&t.catalogId===a.catalogId&&e.editCatalogForm.children.splice(i,1)})},editCatalogChildSubmit:function(){var t=this,a=(0,l.default)({},this.store.get("editCatalog"));this.editCatalogChildForm.avatar=this.imageChildUrl,a.basic.title=this.editCatalogForm.title,a.basic.order=this.editCatalogForm.order,a.basic.avatar=this.editCatalogForm.avatar,a.basic.children.forEach(function(a){if(a.catalogId&&a.catalogId===t.editCatalogChildForm.catalogId)return a.avatar=t.editCatalogChildForm.avatar,a.catalogId=t.editCatalogChildForm.catalogId,a.order=t.editCatalogChildForm.order,void(a.title=t.editCatalogChildForm.title)}),this.store.set("editCatalog",a),this.getMsg(),this.editCatalogChildVisible=!1},editCatalogSubmit:function(){var t=this;this.editCatalogForm.avatar=this.imageUrl,(0,o.updateCatalog)(this.editCatalogForm).then(function(a){a.code>0&&t.$message.error({message:a.message}),t.$message.success({message:"修改成功"}),t.$router.go(-1)})}},mounted:function(){this.getMsg()}}},1802:function(t,a,e){a=t.exports=e(638)(),a.push([t.i,".edit-wrap[data-v-7313956a]{width:90%;padding-top:20px;margin:0 auto}.edit-footer[data-v-7313956a]{margin-top:20px}.avatar-uploader .el-upload[data-v-7313956a]{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload[data-v-7313956a]:hover{border-color:#20a0ff}.avatar-uploader-icon[data-v-7313956a]{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.avatar[data-v-7313956a]{width:178px;height:178px;display:block}.avatar-2[data-v-7313956a]{width:200px;height:100px;display:block}","",{version:3,sources:["D:/PROJECT/huaqie-mp3/src/components/mmd/editCatalog.vue"],names:[],mappings:"AACA,4BACC,UAAW,AACX,iBAAkB,AAClB,aAAe,CACf,AACD,8BACC,eAAiB,CACjB,AACD,6CACG,0BAA2B,AAC3B,kBAAmB,AACnB,eAAgB,AAChB,kBAAmB,AACnB,eAAiB,CACnB,AACD,mDACG,oBAAsB,CACxB,AACD,uCACG,eAAgB,AAChB,cAAe,AACf,YAAa,AACb,aAAc,AACd,kBAAmB,AACnB,iBAAmB,CACrB,AACD,yBACG,YAAa,AACb,aAAc,AACd,aAAe,CACjB,AACD,2BACE,YAAa,AACZ,aAAc,AACd,aAAe,CACjB",file:"editCatalog.vue",sourcesContent:["\n.edit-wrap[data-v-7313956a] {\r\n\twidth: 90%;\r\n\tpadding-top: 20px;\r\n\tmargin: 0 auto;\n}\n.edit-footer[data-v-7313956a] {\r\n\tmargin-top: 20px;\n}\n.avatar-uploader .el-upload[data-v-7313956a] {\r\n   border: 1px dashed #d9d9d9;\r\n   border-radius: 6px;\r\n   cursor: pointer;\r\n   position: relative;\r\n   overflow: hidden;\n}\n.avatar-uploader .el-upload[data-v-7313956a]:hover {\r\n   border-color: #20a0ff;\n}\n.avatar-uploader-icon[data-v-7313956a] {\r\n   font-size: 28px;\r\n   color: #8c939d;\r\n   width: 178px;\r\n   height: 178px;\r\n   line-height: 178px;\r\n   text-align: center;\n}\n.avatar[data-v-7313956a] {\r\n   width: 178px;\r\n   height: 178px;\r\n   display: block;\n}\n.avatar-2[data-v-7313956a] {\r\n \twidth: 200px;\r\n   height: 100px;\r\n   display: block;\n}\r\n"],sourceRoot:""}])},1803:function(t,a,e){var i=e(1802);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(639)("2b62c21d",i,!0)},1804:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"edit-wrap"},[e("el-button",{staticStyle:{"margin-bottom":"20px"},nativeOn:{click:function(a){t.$router.go(-1)}}},[t._v("取消修改")]),t._v(" "),e("el-form",{ref:"editCatalogForm",attrs:{model:t.editCatalogForm,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"名称",prop:"title"}},[e("el-input",{staticClass:"small-el-input",attrs:{"auto-complete":"off"},model:{value:t.editCatalogForm.title,callback:function(a){t.editCatalogForm.title=a},expression:"editCatalogForm.title"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"排序"}},[e("el-input-number",{attrs:{min:0,max:200},model:{value:t.editCatalogForm.order,callback:function(a){t.editCatalogForm.order=a},expression:"editCatalogForm.order"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"头像"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://g2.huaqie.com/cloud/app/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?e("img",{staticClass:"avatar-2",attrs:{src:t.imageUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),e("el-table",{staticStyle:{width:"80%"},attrs:{data:t.editCatalogForm.children}},[e("el-table-column",{attrs:{prop:"avatar",label:"头像",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{"padding-top":"5px"},attrs:{src:t.row.avatar,width:"60",height:"60"}})]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"title",label:"名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"order",label:"排序",width:"180"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.handleEdit(a.$index,a.row)}}},[t._v("编辑")]),t._v(" "),e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){t.handleDelete(a.$index,a.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),e("div",{staticClass:"edit-footer"},[e("el-button",{nativeOn:{click:function(a){t.$router.go(-1)}}},[t._v("取消修改")]),t._v(" "),e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(a){t.editCatalogSubmit(a)}}},[t._v("提交")])],1),t._v(" "),e("el-dialog",{attrs:{title:"修改子分类","close-on-click-modal":!1},model:{value:t.editCatalogChildVisible,callback:function(a){t.editCatalogChildVisible=a},expression:"editCatalogChildVisible"}},[e("el-form",{ref:"addCatalogForm",attrs:{model:t.editCatalogChildForm,"label-width":"80px",rules:t.editCatalogChildFormRules}},[e("el-form-item",{attrs:{label:"名称",prop:"title"}},[e("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editCatalogChildForm.title,callback:function(a){t.editCatalogChildForm.title=a},expression:"editCatalogChildForm.title"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"排序"}},[e("el-input-number",{attrs:{min:0,max:200},model:{value:t.editCatalogChildForm.order,callback:function(a){t.editCatalogChildForm.order=a},expression:"editCatalogChildForm.order"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"头像"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://g2.huaqie.com/cloud/app/upload","show-file-list":!1,"on-success":t.handleChildAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageChildUrl?e("img",{staticClass:"avatar",attrs:{src:t.imageChildUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",slot:"footer"},[e("el-button",{nativeOn:{click:function(a){t.editCatalogChildVisible=!1}}},[t._v("取消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(a){t.editCatalogChildSubmit(a)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]}},640:function(t,a,e){e(1803);var i=e(26)(e(1801),e(1804),"data-v-7313956a",null);t.exports=i.exports}});
//# sourceMappingURL=2.3ff8054679113c429623.js.map